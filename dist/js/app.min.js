"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var Product=function(){function t(e){_classCallCheck(this,t),this.articul=e.ARTICUL,this.name=e.NAME,this.sex=e.SEX,this.color=e.COLOR,this.season=e.SEASON,this.outside=e.OUTSIDE,this.inside=e.INSIDE,this.price=parseFloat(e.PRICE),this.sale=parseFloat(e.SALE),this.img=e.IMG,this.webp=e.WEBP,this.sizes=[1,2,3,4,5,6],this.sexClass=function(){return"жіноче"==this.sex?"sex-women":"комфорт"==this.sex?"sex-comfort":"классік"==this.sex?"sex-classic":""},this.seasonClass=function(){return"літо"==this.season?"season-summer":"весна-осінь"==this.season?"season-spring":"зима"==this.season?"season-winter":"демісезон"==this.season?"season-demi":""},this.sexSizes=function(){var e="";if("жіноче"==this.sex)for(var t=0;t<this.sizes.length;t++)e+='<p class="size">'.concat(this.sizes[t]+35,"</p>");else for(var n=0;n<this.sizes.length;n++)e+='<p class="size">'.concat(this.sizes[n]+39,"</p>");return e}}return _createClass(t,[{key:"buildProduct",value:function(){var e,t,n,i,o,s,a,c,r=document.body.classList.contains("webp"),l=document.createElement("div");return""==this.articul?l.id="emptyElement":(l.classList.add("catalog-item",this.sexClass(),this.seasonClass()),l.id="prod_".concat(this.articul),(e=document.createElement("img")).className="c-item__img",e.src="../img/catalog/shoes-default.png",r?e.setAttribute("data",this.webp):e.setAttribute("data",this.img),(r=document.createElement("p")).className="c-item__name",r.innerText=this.name,(t=document.createElement("div")).className="c-item-descr",(n=document.createElement("p")).className="c-item__color",n.innerHTML="<span>Колір: </span>".concat(this.color.toLowerCase()),(i=document.createElement("p")).className="c-item__season",i.innerHTML="<span>Сезон: </span>".concat(this.season.toLowerCase()),(o=document.createElement("p")).className="c-item__outside",o.innerHTML="<span>Матеріал верху: </span>".concat(this.outside.toLowerCase()),(c=document.createElement("p")).className="c-item__inside",c.innerHTML="<span>Матеріал в середині: </span>".concat(this.inside.toLowerCase()),t.append(n,i,o,c),(n=document.createElement("div")).className="c-item-spa-block",(i=document.createElement("div")).className="c-item__size",i.innerHTML=this.sexSizes(),(o=document.createElement("div")).className="c-item-price__block",(c=document.createElement("p")).classList.add("c-item__action",getActionSale(this.price,this.sale)),c.innerText="".concat(this.sale.toLocaleString("ru-RU")," грн"),(s=document.createElement("div")).className="c-item-price__elem",(a=document.createElement("p")).classList.add("c-item__price",getActionPrice(this.price,this.sale)),a.innerText="".concat(this.price.toLocaleString("ru-RU")," грн"),s.append(a),o.append(c,s),(a=document.createElement("div")).className="c-item__art",(c=document.createElement("div")).className="art__text",c.innerHTML="<span>Артикул: </span>".concat(this.articul),a.appendChild(c),n.append(i,o,a),l.append(e,r,t,n)),l}}]),t}(),Catalog=function(){function e(){_classCallCheck(this,e),this.products=[]}return _createClass(e,[{key:"render",value:function(){var t=document.createElement("div"),e=(t.className="catalog-container",document.createElement("div"));e.className="error-title",e.innerText="Упс... Щось пішло не так. Спробуйте перезавантажити сторінку.",t.appendChild(e),this.products.forEach(function(e){e=e.buildProduct();"emptyElement"!=e.id&&t.appendChild(e)}),document.getElementById("catalog").appendChild(t)}},{key:"generateProducts",value:function(e){this.products=e.map(function(e){return new Product(e)});for(var t=0;t<this.products.length;t++)""==this.products[t].articul&&this.products.pop(this.products[t])}}]),e}();function getActionSale(e,t){return 0!=t&&t<e?"action-enabled":"action-disabled"}function getActionPrice(e,t){return 0!=t&&t<e?"price-inactive":"price-active"}function isWebp(){var e,t;e=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function toggleBurger(){var t=document.querySelector(".header__burger"),n=document.querySelector(".header__menu"),e=document.querySelectorAll(".header__list a"),i=document.querySelectorAll(".filter-option"),o=document.body;t.addEventListener("click",function(e){t.classList.toggle("active"),n.classList.toggle("active"),o.classList.toggle("lock"),n.classList.toggle("lock")}),e.forEach(function(e){return e.addEventListener("click",function(e){t.classList.toggle("active"),n.classList.toggle("active"),o.classList.toggle("lock"),n.classList.toggle("lock")})}),i.forEach(function(e){return e.addEventListener("click",function(e){t.classList.toggle("active"),n.classList.toggle("active"),o.classList.toggle("lock"),n.classList.toggle("lock")})})}function checkTouchDevice(){var e="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,t=document.querySelectorAll(".hoverable");e&&t.forEach(function(e){return e.classList.remove("hoverable")})}function createWayFoto(e){var e=e.slice(0,-4),t=isWebp()?".webp":".jpg",e=1200<=window.innerWidth?e+1200+t:992<=window.innerWidth?e+992+t:768<=window.innerWidth?e+768+t:560<=window.innerWidth?e+560+t:320<=window.innerWidth?e+320+t:e+"-min"+t;return e}function setFotoPath(e,t){e=document.querySelector(e),t=createWayFoto(t);e.setAttribute("src",t)}function assignIndexFotoPath(){[{selector:".main-foto__img",path:"img/main/main-foto.jpg"},{selector:".g-repare-foto__img",path:"img/guarantee/repare-foto.jpg"},{selector:".g-service-foto__img",path:"img/guarantee/service-foto.jpg"}].forEach(function(e){return setFotoPath(e.selector,e.path)})}function checkTouchFooter(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}function qrOnTouchDevice(){var e=document.querySelector(".f-facebook-link"),t=document.querySelector(".f-insta-link");e.addEventListener("mouseover",function(){checkTouchFooter()||document.getElementById("fbqr").classList.add("show-qr")}),e.addEventListener("mouseout",function(){document.getElementById("fbqr").classList.remove("show-qr")}),t.addEventListener("mouseover",function(){checkTouchFooter()||document.getElementById("instaqr").classList.add("show-qr")}),t.addEventListener("mouseout",function(){document.getElementById("instaqr").classList.remove("show-qr")})}var catalogPage=new Catalog;function renderCatalog(){Papa.parse("../files/pricelist.csv",{download:!0,header:!0,skipEmptyLines:"greedy",complete:function(e){catalogPage.generateProducts(e.data),catalogPage.render(),document.querySelectorAll(".c-item__img").forEach(function(e){observer.observe(e)})}})}function getFilter(e){var t=e.split("_"),e=(Array.from(document.querySelectorAll(".catalog-item")).forEach(function(e){e.classList.add("hide-item"),e.classList.remove("show-item"),(t[1]==t[2]||"all"==t[1]&&e.classList.contains("season-".concat(t[2]))||e.classList.contains("sex-".concat(t[1]))&&"all"==t[2]||e.classList.contains("sex-".concat(t[1]))&&e.classList.contains("season-".concat(t[2])))&&(e.classList.remove("hide-item"),e.classList.add("show-item"))}),Array.from(document.querySelectorAll(".show-item"))),n=document.querySelector(".error-title");0==e.length?n.classList.add("show-item"):n.classList.remove("show-item")}function filterOtherPage(e){if(!e.target.classList.contains("filter-option"))return!1;e=e.target.id;window.location.href="/catalog-page.html?"+e}var filterFromOtherPage=function(){var e=window.location.href.split("?")[1];if(void 0===e)return!1;getFilter(e)};function filterHandler(e){if(!e.target.classList.contains("filter-option"))return!1;getFilter(e.target.id)}function filterShowHideUI(){var t=document.getElementById("filter_btn"),n=document.querySelector(".sex-container"),e=document.querySelectorAll(".sex-header"),i=document.querySelector(".season-container"),o=document.querySelectorAll(".season-header");function s(){e.forEach(function(e){var t=e.nextElementSibling;t.classList.contains("show-item")&&(t.classList.remove("show-item"),e.classList.remove("active"))})}t.addEventListener("click",function(e){if("filter_btn"!==e.target.id)return!1;t.classList.toggle("active"),n.classList.toggle("show-item"),s()}),e.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.nextElementSibling;e.target.classList.toggle("active"),t.classList.contains("show-item")?s():(s(),t.classList.toggle("show-item"))})}),o.forEach(function(e){e.addEventListener("click",function(){i.classList.remove("show-item"),n.classList.remove("show-item")})}),document.addEventListener("click",function(e){"filter_btn"==e.target.id||e.target.classList.contains("sex-container")||e.target.classList.contains("season-container")||e.target.classList.contains("sex-header")||e.target.classList.contains("season-header")||(i.classList.remove("show-item"),n.classList.remove("show-item"))})}var optionts={root:null,rootMargin:"0px",threshold:.1};function handleImg(e,t){e.forEach(function(e){console.log(e.intersectionRatio),0<e.intersectionRatio&&loadImage(e.target)})}function loadImage(e){e.src=e.getAttribute("data")}var observer=new IntersectionObserver(handleImg,optionts),headerFilter=(window.addEventListener("load",function(){document.getElementById("spinner").style.display="none"}),isWebp(),checkTouchDevice(),qrOnTouchDevice(),toggleBurger(),filterShowHideUI(),document.querySelector(".sex-container")),currentPageUrl=window.location.href;currentPageUrl.includes("catalog")?(renderCatalog(),setTimeout(filterFromOtherPage,500),headerFilter.addEventListener("click",filterHandler)):(assignIndexFotoPath(),headerFilter.addEventListener("click",filterOtherPage));
//# sourceMappingURL=app.min.js.map
